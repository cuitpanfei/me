<!DOCTYPE html>
<html lang="en-us"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>


All Categories | Cuitpanfei Site</title>

    

<link rel="canonical" href="http://localhost:1313/categories/" />



<meta name="author" content="" />
<meta name="description" content="" />



<meta name="generator" content="Hugo 0.150.0">


<meta property="og:url" content="http://localhost:1313/categories/">
  <meta property="og:site_name" content="Cuitpanfei Site">
  <meta property="og:title" content="Categories">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Categories">




<link rel="stylesheet" href="/css/output.css" />




     

    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js" integrity="sha256-4EHxtjnR5rL8JzbY12OKQJr81ESm7JBEb49ORPo29AY=" crossorigin="anonymous"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav class="mt-4 lg:mt-8 py-4">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/" alt="" />
        </div>
      </div>

      
    </section>

    
    

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md">
        
























<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      

      
      





      
      





      
      





      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="Archives">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="All Categories">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="All Tags">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      

      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            


<div class="flex flex-col md:flex-row mt-4">

  <div class="md:basis-[200px] lg:basis-[300px] p-4 prose dark:prose-invert">
    <h1 class="text-2xl">All Categories</h1>
    <p class="text-sm">18 categories</p>
    <div class="flex flex-wrap gap-4 mt-6">
      
      <a href="/categories/docker/" class="badge h-6 no-underline hover:badge-primary">
        Docker
      </a>
      
      <a href="/categories/ide/" class="badge h-6 no-underline hover:badge-primary">
        IDE
      </a>
      
      <a href="/categories/java/" class="badge h-6 no-underline hover:badge-primary">
        Java
      </a>
      
      <a href="/categories/maven/" class="badge h-6 no-underline hover:badge-primary">
        Maven
      </a>
      
      <a href="/categories/nas/" class="badge h-6 no-underline hover:badge-primary">
        NAS
      </a>
      
      <a href="/categories/spring-cloud/" class="badge h-6 no-underline hover:badge-primary">
        Spring Cloud
      </a>
      
      <a href="/categories/springboot/" class="badge h-6 no-underline hover:badge-primary">
        SpringBoot
      </a>
      
      <a href="/categories/%E5%89%8D%E7%AB%AF/" class="badge h-6 no-underline hover:badge-primary">
        前端
      </a>
      
      <a href="/categories/%E5%A5%BD%E7%8E%A9%E6%8A%80%E5%B7%A7/" class="badge h-6 no-underline hover:badge-primary">
        好玩技巧
      </a>
      
      <a href="/categories/%E5%BB%BA%E7%AB%99/" class="badge h-6 no-underline hover:badge-primary">
        建站
      </a>
      
      <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="badge h-6 no-underline hover:badge-primary">
        数据库
      </a>
      
      <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="badge h-6 no-underline hover:badge-primary">
        数据结构与算法
      </a>
      
      <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" class="badge h-6 no-underline hover:badge-primary">
        架构设计
      </a>
      
      <a href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" class="badge h-6 no-underline hover:badge-primary">
        版本控制
      </a>
      
      <a href="/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/" class="badge h-6 no-underline hover:badge-primary">
        虚拟机
      </a>
      
      <a href="/categories/%E8%AF%AD%E8%A8%80/" class="badge h-6 no-underline hover:badge-primary">
        语言
      </a>
      
      <a href="/categories/%E8%BF%90%E7%BB%B4/" class="badge h-6 no-underline hover:badge-primary">
        运维
      </a>
      
      <a href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/" class="badge h-6 no-underline hover:badge-primary">
        默认分类
      </a>
      
    </div>
  </div>
  
  <div class="divider divider-vertical md:divider-horizontal px-4 md:px-0"></div>
  
  <div class="flex-1">
    

    
    <div class="dream-grid">
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-371/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default1_hu_33478ca164b4fce4.webp" type="image/webp" />
      <img src="/images/default1.jpg" alt="/images/default1.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">数据结构和算法关系</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Dec 12, 2017
    
    </p>

    <p>数据结构：数据与数据之间的结构关系（数组、队列、树、图等结构）</p>
<p>算法：解决问题的步骤</p>
<p>总结：</p>
<p>1、程序 = 数据结构 + 算法 。数据是程序的中心。数据结构和算法两个概念间的逻辑关系贯穿了整个程序世界，首先二者表现为不可分割的关系。没有数据间的有机关系，程序根本无法设计。</p>
<p>2、数据结构与算法关系：数据结构是底层，算法高层。数据结构为算法提供服务。算法围绕数据结构操作。</p>
<p>3、解决问题（算法）需要选择正确的数据结构。例如：算法中经常需要对数据进行增加和删除用链表数据结构效率高，数组数据结构因为增加和删除需要移动数字每个元素所有效率低。</p>
<p>4、数据结构特点：每种数据结构都具有自己的特点。例如：队列：先进先出。栈：先进后出。等等</p>
<p>5、算法的特性：算法具有五个基本特征：输入、输出、有穷性、确定性和可行性。</p>
<p>6、数据结构应用：数据结构往往同高效的检索算法、索引技术、排序算法有关</p>
<p>7、数据结构（逻辑数据结构）通过计算机语言来实现数据结构（存储数据结构）。例如：树型数据结构：通过计算机语言中的数组（节点）和指针（指向父节点）来实现。</p>
<p>8、存储结构：逻辑数据结构的实现。存储结构通过计算机语言实现。 例如：堆数据结构，堆是一棵完全二叉树，所以适宜采用顺序存储结构（顺序存储：数组），这样能够充分利用存储空间。</p>
<p>9、算法目的：算法是为数据结构服务。例如：数据结构通常伴随有查找算法、排序算法等</p>
<p>10、数据结构的优劣：一种数据结构的优劣是在实现其各种运算的算法中体现的。</p>
<p>二、数据结构：分为逻辑数据结构和存储数据结构两种 （1）顺序存储方法（顺序存储结构） （2）链接存储方法（链式存储结构） 同一种逻辑结构可采用不同的存储方法（以上两种之一或组合），这主要考虑的是运算方便及算法的时空要求。</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/other/post-372/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default3_hu_599e07ea93afc07d.webp" type="image/webp" />
      <img src="/images/default3.jpg" alt="/images/default3.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">秒杀系统架构优化思路</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Dec 12, 2017
    
    </p>

    <p>-&mdash;&mdash;&mdash;&mdash;&mdash;-来自小马哥的故事</p>
<h2 id="一为什么难">一、为什么难</h2>
<p>秒杀系统难做的原因：库存只有一份，所有人会在集中的时间读和写这些数据。 例如小米手机每周二的秒杀，可能手机只有1万部，但瞬时进入的流量可能是几百几千万。 又例如12306抢票，亦与秒杀类似，瞬时流量更甚。</p>
<h2 id="二常见架构">二、常见架构</h2>
<p>流量到了亿级别，常见站点架构如上：</p>
<ul>
<li>
<p>1）浏览器端，最上层，会执行到一些JS代码</p>
</li>
<li>
<p>2）站点层，这一层会访问后端数据，拼html页面返回给浏览器</p>
</li>
<li>
<p>3）服务层，向上游屏蔽底层数据细节</p>
</li>
<li>
<p>4）数据层，最终的库存是存在这里的，mysql是一个典型</p>
</li>
</ul>
<h2 id="三优化方向">三、优化方向</h2>
<ul>
<li>
<p>1）将请求尽量拦截在系统上游：传统秒杀系统之所以挂，请求都压倒了后端数据层，数据读写锁冲突严重，并发高响应慢，几乎所有请求都超时，流量虽大，下单成功的有效流量甚小【一趟火车其实只有2000张票，200w个人来买，基本没有人能买成功，请求有效率为0】</p>
</li>
<li>
<p>2）充分利用缓存：这是一个典型的读多些少的应用场景【一趟火车其实只有2000张票，200w个人来买，最多2000个人下单成功，其他人都是查询库存，写比例只有0.1%，读比例占99.9%】，非常适合使用缓存</p>
</li>
</ul>
<h2 id="四优化细节">四、优化细节</h2>
<h3 id="浏览器层请求拦截">浏览器层请求拦截</h3>
<p>点击了“查询”按钮之后，系统那个卡呀，进度条涨的慢呀，作为用户，会不自觉的再去点击“查询”，继续点，继续点，点点点。。。有用么？平白无故的增加了系统负载（一个用户点5次，80%的请求是这么多出来的），怎么整？</p>
<ul>
<li>
<p>a）产品层面，用户点击“查询”或者“购票”后，按钮置灰，禁止用户重复提交请求</p>
</li>
<li>
<p>b）JS层面，限制用户在x秒之内只能提交一次请求 如此限流，80%流量已拦</p>
</li>
</ul>
<h3 id="站点层请求拦截与页面缓存">站点层请求拦截与页面缓存</h3>
<p>浏览器层的请求拦截，只能拦住小白用户（不过这是99%的用户哟），高端的程序员根本不吃这一套，写个for循环，直接调用你后端的http请求，怎么整？</p>
<ul>
<li>
<p>a）同一个uid，限制访问频度，做页面缓存，x秒内到达站点层的请求，均返回同一页面</p>
</li>
<li>
<p>b）同一个item的查询，例如手机车次，做页面缓存，x秒内到达站点层的请求，均返回同一页面 如此限流，又有99%的流量会被拦截在站点层</p>
</li>
</ul>
<h3 id="服务层请求拦截与数据缓存">服务层请求拦截与数据缓存</h3>
<p>站点层的请求拦截，只能拦住普通程序员，高级黑客，假设他控制了10w台肉鸡（并且假设买票不需要实名认证），这下uid的限制不行了吧？怎么整？</p>
<ul>
<li>
<p>a）大哥，我是服务层，我清楚的知道小米只有1万部手机，我清楚的知道一列火车只有2000张车票，我透10w个请求去数据库有什么意义呢？对于写请求，做请求队列，每次只透过有限的写请求去数据层，如果均成功再放下一批，如果库存不够则队列里的写请求全部返回“已售完”</p>
</li>
<li>
<p>b）对于读请求，还用说么？cache来抗，不管是memcached还是redis，单机抗个每秒10w应该都是没什么问题的 如此限流，只有非常少的写请求，和非常少的读缓存mis的请求会透到数据层去，又有99.9%的请求被拦住了</p>
</li>
</ul>
<h3 id="数据层闲庭信步">数据层闲庭信步</h3>
<p>到了数据这一层，几乎就没有什么请求了，单机也能扛得住，还是那句话，库存是有限的，小米的产能有限，透过过多请求来数据库没有意义。</p>
<h2 id="五总结">五、总结</h2>
<p>没什么总结了，上文应该描述的非常清楚了，对于秒杀系统，再次重复下笔者的两个架构优化思路：</p>
<ul>
<li>
<p>1）尽量将请求拦截在系统上游</p>
</li>
<li>
<p>2）读多写少的常用多使用缓存</p>
</li>
</ul>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">小马哥</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/other/post-373/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default2_hu_c96b8a8cc3f55f81.webp" type="image/webp" />
      <img src="/images/default2.jpg" alt="/images/default2.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">百度怎么做长文本去重的?</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Dec 12, 2017
    
    </p>

    <hr>



  <blockquote>
    <p>（1）原创不易，互联网抄袭成风，很多原创内容在网上被抄来抄去，改来改去</p>
<p>（2）百度的网页库非常大，爬虫如何判断一个新网页是否与网页库中已有的网页重复呢？</p>
<p>这是本文要讨论的问题（尽量用大家都能立刻明白的语言和示例表述）。</p>
  </blockquote>

<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-来自小马哥的故事</p>
<hr>
<h2 id="一传统签名算法与文本完整性判断">一、传统签名算法与文本完整性判断</h2>
<h3 id="问题抛出">问题抛出：</h3>
<p>（1）运维上线一个bin文件，将文件分发到4台线上机器上，如何判断bin文件全部是一致的？ （2）用户A将消息msg发送给用户B，用户B如何判断收到的msg_t就是用户A发送的msg？</p>
<h3 id="思路">思路：</h3>
<p>一个字节一个字节的比对两个大文件或者大网页效率低，我们可以用一个签名值（例如md5值）代表一个大文件，签名值相同则认为大文件相同（先不考虑冲突率）</p>
<h3 id="回答">回答：</h3>
<p>（1）将bin文件取md5，将4台线上机器上的bin文件也取md5，如果5个md5值相同，说明一致 （2）用户A将msg以及消息的md5同时发送给用户B，用户B收到msg_t后也取md5，得到的值与用户A发送过来的md5值如果相同，则说明msg_t与msg相同</p>
<h3 id="结论">结论：</h3>
<p>md5是一种签名算法，常用来判断数据的完整性与一致性</p>
<p>md5设计原则：两个文本哪怕只有1个bit不同，其md5签名值差别也会非常大，故它只适用于“完整性”check，不适用于“相似性”check。</p>
<h3 id="新问题抛出">新问题抛出：</h3>
<p>有没有一种签名算法，如果文本非常相似，签名值也非常相似呢？</p>
<h2 id="二文本相似性的签名算法">二、文本相似性的签名算法</h2>
<p>上文提出的问题，可以用局部敏感哈希LSH（Locality Sensitive Hash）解决，局部敏感哈希是一类文本越相似，哈希值越相似的hash算法，有兴趣的同学自行百度，这里分享一下minHash的思路。</p>
<h3 id="问题的提出什么是minhash">问题的提出：什么是minHash？</h3>
<p>回答：minHash是局部敏感哈希的一种，它常用来快速判定集合的相似性，也常用于检测网页的重复性，其思路为，用相同的规则抽取集合中的少部分元素代表整个集合，如果少部分元素的重合度很高，非常可能整个集合的重复度也很高。</p>
<pre tabindex="0"><code>举例：待判定的集合为A{1, 7, 5, 9, 3, 11, 15, 13}
已有的集合为：
B{10, 8, 2, 4, 6, 0, 1, 16},
C{100, 700, 500, 900, 300, 1100, 1500,1300},
D{1, 3, 2, 4, 6, 5, 8, 7}
假设使用部分元素代替全体集合的规则为：集合内元素进行排序，取值最小的4个（这个过程有信息损失，我们可以认为是一个hash过程）
处理结果为：
A{1, 3, 5, 7}
B{0, 1, 2, 4}  =&gt; A与B有1个元素相同
C{100, 300, 500, 700}  =&gt; A与C有0个元素相同
D{1, 2, 3, 4}  =&gt; A与D有2个元素相同
</code></pre><p>判断结论：我们认为集合A与集合D是最相似的</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">小马哥</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-374/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">maven编码</h2>

    <p class="date text-base-content/60">
    
      Friday, Dec 1, 2017
    
    </p>

    <pre tabindex="0"><code>  &lt;properties&gt;
        &lt;!-- 所有工程中,对依赖的根组件(root jar)的版本维护 --&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
          &lt;!-- 统一字符集 --&gt;
	    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
	  &lt;/properties&gt;
	  
	  
	  
	  
	  
	  
	  &lt;build&gt;
	      &lt;finalName&gt;springBoot&lt;/finalName&gt;
	      &lt;plugins&gt;
	      	&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
             &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
             &lt;version&gt;3.3&lt;/version&gt;
             &lt;configuration&gt;
                 &lt;source&gt;${java.version}&lt;/source&gt;
                 &lt;target&gt;${java.version}&lt;/target&gt;
                 &lt;encoding&gt;${project.build.sourceEncoding}&lt;/encoding&gt;
             &lt;/configuration&gt;
	      &lt;/plugins&gt;
	  &lt;/build&gt;
</code></pre>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-375/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default2_hu_c96b8a8cc3f55f81.webp" type="image/webp" />
      <img src="/images/default2.jpg" alt="/images/default2.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">一个程序员该记住的话</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Nov 28, 2017
    
    </p>

    <p><strong>勒布朗（LeBlanc）法则：</strong></p>
<pre tabindex="0"><code>                  稍后等于永不（Later equals never）
</code></pre><p>Dave Thomas，OTI公司创始人，Eclipse战略教父说过:</p>
<pre tabindex="0"><code>没有测试的代码不干净。不管它有多优雅，不管有多可读、多易理解，微乎测试，其不洁亦可知也。
</code></pre>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/other/post-376/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default1_hu_33478ca164b4fce4.webp" type="image/webp" />
      <img src="/images/default1.jpg" alt="/images/default1.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">传统 for 循环的函数式替代方案</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Nov 28, 2017
    
    </p>

    <hr>



  <blockquote>
    <p>尽管 for 循环包含许多可变部分，但许多开发人员仍非常熟悉它，并会不假思索地使用它。从 Java™ 8 开始，我们有多个强大的新方法可帮助简化复杂迭代。在本文中，您将了解如何使用 IntStream 方法 range、iterate 和 limit 来迭代范围和跳过范围中的值。您还将了解新的 takeWhile 和 dropWhile 方法（即将在 Java 9 中引入）。</p>
  </blockquote>

<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-来自小马哥的故事</p>
<hr>
<h2 id="for-循环的麻烦">for 循环的麻烦</h2>
<p>在 Java 语言的第 1 个版本中就开始引入了传统的 for 循环，它的更简单的变体 for-each 是在 Java 5 中引入的。大部分开发人员更喜欢使用 for-each 执行日常迭代，但对于迭代一个范围或跳过范围中的值等操作，他们仍会使用 for。</p>
<p>or 循环非常强大，但它包含太多可变部分。甚至在打印 get set 提示的最简单任务中，也可以看出这一点：</p>
<pre tabindex="0"><code>清单 1. 完成一个简单任务的复杂代码:

System.out.print(&#34;Get set...&#34;);
  for(int i = 1; i &lt; 4; i++) {
    System.out.print(i + &#34;...&#34;);
  }
</code></pre><p>在清单 1 中，我们从 1 开始循环处理索引变量 i，将它限制到小于 4 的值。请注意，for 循环需要我们告诉循环是递增的。在本例中，我们还选择了前递增而不是后递增。</p>
<p>清单 1 中没有太多代码，但比较繁琐。Java 8 提供了一种更简单、更优雅的替代方法：IntStream 的 range 方法。以下是打印清单 1 中的相同 get set 提示的 range方法：</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">小马哥</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>3 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/other/post-377/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">如何设计出高可用、高性能的接口</h2>

    <p class="date text-base-content/60">
    
      Tuesday, Nov 28, 2017
    
    </p>

    <hr>



  <blockquote>
    <p>接口设计怎么样才能高可用,高性能?</p>
  </blockquote>

<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-来自小马哥的故事</p>
<hr>
<h2 id="接口设计需要考虑哪些方面">接口设计需要考虑哪些方面</h2>
<ol>
<li>接口的命名。</li>
<li>请求参数。</li>
<li>支持的协议。</li>
<li>TPS、并发数、响应时长。</li>
<li>是否需要白名单。</li>
<li>数据存储。DB选型、缓存选型。</li>
<li>是否需要依赖于第三方。</li>
<li>接口是否拆分。</li>
<li>接口是否需要幂等。</li>
<li>防刷。</li>
<li>接口限流、降级。</li>
<li>负载均衡器支持。</li>
<li>如何部署。</li>
<li>是否需要服务治理。</li>
<li>是否存在单点。</li>
<li>接口是否资源包、预加载还是内置。</li>
<li>是否需要本地缓存。</li>
<li>是否需要分布式缓存、缓存穿透怎么办。</li>
</ol>
<p>当我们设计接口，我们或多或少都会有上面列举的一些考虑，我们只有想的更多才能让让我们的接口更加完善，我个人觉得100%完美的接口是不存在，只有适合才是最重要。</p>
<h2 id="接口设计原则">接口设计原则</h2>
<p>原则一：必须符合Restful，统一返回格式，约定业务层错误编码，每个编码可以携带可选的错误信息。</p>
<p>原则二： 命名必须规范、优雅。</p>
<p>原则三：单一性。</p>
<p>单一性是指接口要做的事情应该是一个比较单一的事情，比如登陆接口，登陆完成应该只是返回登陆成功以后一些用户信息即可，但很多人为了减少接口交互，返回一大堆额外的数据。比如有人设计一个用户列表接口，接口他返回每一条数据都是包含用户了一大堆跟另外无关的数据，结果一问，原来其他无关的数据是他下一步想要获取的，想达成数据的懒加载</p>
<p>原则四：可扩展。</p>
<p>接口扩展性，是指设计接口的时候多想想多种情况，多考虑各个方面，其实我觉得单独将扩展性放在这里也是不妥的，感觉说的跟单一性有点相反的意思，其实这个不是这个意思，这边的扩展性是指我们的接口充分考虑客户端，想想他们是如何调用的，他要怎样使用我的代码，他会如何扩展我的代码，不要把过多的工作写在你的接口里面，而应该把更多的主动权交给客户程序员。如获取不同的列表数据接口，我们不可能将每个列表都写成一个接口。 还有一点，我这里特别想指出来的是很多开发人员为了省事（姑且只能这么理解），将接口设计当成只是app页面展示，这些人将一个页面展示就用一个接口实现，而不考虑这些数据是不是属于不同的模块、是不是属于不同的展示范畴、结果下次视觉一改，整个接口又得重写，不能复用。</p>
<p>原则五：必须有文档。</p>
<p>良好的接口设计，离不开清晰的接口文档表述。文档表述一定要足够详细</p>
<p>原则六：产品心。</p>
<p>为什么我说要有产品心？因为我觉得很多人忽略了这一点。我来说一下假如开发一个app，如果一开始连个交互文档给你都没有的话，你怎么设计接口？所以我觉得作为一个服务端后台开发人员应该要有产品心，特别是对于交互文档应该好好理解，因为这些都会对我们的接口设计有很大的影响，我在设计接口的时候就很常发现很多交互文档根本就走不通，产品没有考虑到位，交互文档缺失，这时候作为一个开发要主动推动，完善。</p>
<p>原则七：第三方服务接口数据能缓存就缓存。</p>
<p>原则八：第三方服务需要做降级。</p>
<p>原则九：建议消除单点。</p>
<p>原则十：接口粒度要小。</p>
<p>原则十一：客户端能处理的逻辑就不要给服务端处理，减少服务端压力。</p>
<p>原则十二：资源预加载。</p>
<p>原则十三：不要过度设计。</p>
<p>原则十四：缓存尽量不要穿透。</p>
<p>原则十五：接口能缓存就缓存。</p>
<p>原则十六：思辨大于执行</p>
<h2 id="如何保证接口的高可用高性能">如何保证接口的高可用、高性能</h2>
<p>上面也列举很多需要考虑和设计的原则，其实还有很多方面，我这边也不是特别全面。居于上面列举的这些考虑点，其实这边说服务是更恰当，能把上面说的点做好，其实接口也是比较可靠，如何设计以及保证接口的高可用和高性能。可以思考一下以下几个point</p>
<h3 id="高性能如果我们发现这个接口tps和响应时间没有达到我们的要求怎么办">高性能：如果我们发现这个接口tps和响应时间没有达到我们的要求怎么办。</h3>
<ul>
<li>
<p>A：数据存储方面：我们会想数据库有没有分库、分表、有没有做主从，有没有读写分离、字段是否有加索引、是否存在慢sql，数据库引擎是否选用合适、是不是用了事务；其次我们会想到是不是引用了分布式缓存、缓存key大小是否合适，失效时间是否设置合理，会不会大量缓存穿透、有没有引入本地缓存。</p>
</li>
<li>
<p>B：业务方面：是否有大量的计算、能否异步处理。是否需要引入线程池或者MQ来异步处理任务。有没有必要将接口进行垂直拆分和水平拆分、将接口粒度变小。</p>
</li>
<li>
<p>C：其他方面：nginx层面做缓存、加机器、用ssd，资源放cdn，多机房部署、资源文件预加载。</p>
</li>
</ul>
<h3 id="高可用如何保证服务高可用需要从几个维度来实现">高可用：如何保证服务高可用，需要从几个维度来实现：</h3>
<ul>
<li>
<p>A：消除单点，基于高可用第二位。</p>
</li>
<li>
<p>B：能做集群的全部做集群。譬如Redis集群、mysql集群、MongoDB副本集。</p>
</li>
<li>
<p>C：能做读写分离的都做读写分离。</p>
</li>
<li>
<p>D：异地多机房部署，接入GSLB</p>
</li>
<li>
<p>E：必须有限流、降级机制。</p>
</li>
<li>
<p>F：监控。高可用的保证，基于第一位</p>
</li>
</ul>
<p>下图是从一个基本的请求出发来梳理需要涉及到各个段，以及各个端能做的事情。谈谈接口服务，但不局限于接口本身。</p>
<p><img src="https://img.maruifu.com/images/blog/blogimg/jiekousheji.jpg" alt="接口设计" title="接口设计"></p>
<ol>
<li>
<p>客户端：资源预加载、限制请求、数据上报。我这边就拿客户端来举个例子。接口服务所依赖的资源包或者一些公共配置预加载在本地，减少接口的交互，通过请求配置文件是否更新，code是否是304等来；接口做一些请求限制，比如抢红包、抢券等，单位时间内N次点击只请求一次等；接口失败数据上报来；这就是客户端可以做到的对接口有帮助的事情</p>
</li>
<li>
<p>GSLB/HttpDNS：多机房部署、流量切换、域名劫持，一般技术和业务比较成熟的公司这一层。</p>
</li>
<li>
<p>资源文件放CDN。</p>
</li>
<li>
<p>负载均衡器：lVS+Nginx是互联网常用的做负载均衡，可以实现四层/七层负载均衡；这里除了可以分流、转发以外，我们用的更多的基于令牌桶限流、缓存。</p>
</li>
<li>
<p>本地缓存。本地缓存能减少我们访问DB或者分布式缓存，本地缓存推荐使用guava，guava里面有很多特性很好用，例如基于令牌桶的限流；当缓存失效时只穿透一个请求去访问后端。</p>
</li>
<li>
<p>线程池。</p>
</li>
<li>
<p>模块拆分。将一个项目按功能模块拆分，一个接口也可以按业务粒度进行拆分。</p>
</li>
<li>
<p>数据中心。提供数据支撑，譬如黑名单。</p>
</li>
<li>
<p>数据库。加索引、分库、分表、读写分离</p>
</li>
<li>
<p>分布式缓存。数据分片、拆分大key，并做集群，采用分布式锁</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">小马哥</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/other/post-378/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default2_hu_c96b8a8cc3f55f81.webp" type="image/webp" />
      <img src="/images/default2.jpg" alt="/images/default2.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">Linux 运维人员最常用 150 个命令汇总</h2>

    <p class="date text-base-content/60">
    
      Thursday, Nov 23, 2017
    
    </p>

    <hr>



  <blockquote>
    <p>linux 命令是对 Linux 系统进行管理的命令。对于 Linux 系统来说，无论是中央处理器、内存、磁盘驱动器、键盘、鼠标，还是用户等都是文件， Linux 系统管理的命令是它正常运行的核心，与之前的 DOS 命令类似。linux 命令在系统中有两种类型：内置 Shell 命令和 Linux 命令。</p>
  </blockquote>

<p>-&mdash;&mdash;&mdash;&mdash;&mdash;-来自小马哥的故事</p>
<hr>
<table>
  <thead>
      <tr>
          <th>命令</th>
          <th>功能说明</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>线上查询及帮助命令 (2 个)</td>
          <td></td>
      </tr>
      <tr>
          <td>man</td>
          <td>查看命令帮助，命令的词典，更复杂的还有 info，但不常用。</td>
      </tr>
      <tr>
          <td>help</td>
          <td>查看 Linux 内置命令的帮助，比如 cd 命令。</td>
      </tr>
      <tr>
          <td>文件和目录操作命令 (18 个)</td>
          <td></td>
      </tr>
      <tr>
          <td>ls</td>
          <td>全拼 list，功能是列出目录的内容及其内容属性信息。</td>
      </tr>
      <tr>
          <td>cd</td>
          <td>全拼 change directory，功能是从当前工作目录切换到指定的工作目录。</td>
      </tr>
      <tr>
          <td>cp</td>
          <td>全拼 copy，其功能为复制文件或目录。</td>
      </tr>
      <tr>
          <td>find</td>
          <td>查找的意思，用于查找目录及目录下的文件。</td>
      </tr>
      <tr>
          <td>mkdir</td>
          <td>全拼 make directories，其功能是创建目录。</td>
      </tr>
      <tr>
          <td>mv</td>
          <td>全拼 move，其功能是移动或重命名文件。</td>
      </tr>
      <tr>
          <td>pwd</td>
          <td>全拼 print working directory，其功能是显示当前工作目录的绝对路径。</td>
      </tr>
      <tr>
          <td>rename</td>
          <td>用于重命名文件。</td>
      </tr>
      <tr>
          <td>rm</td>
          <td>全拼 remove，其功能是删除一个或多个文件或目录。</td>
      </tr>
      <tr>
          <td>rmdir</td>
          <td>全拼 remove empty directories，功能是删除空目录。</td>
      </tr>
      <tr>
          <td>touch</td>
          <td>创建新的空文件，改变已有文件的时间戳属性。</td>
      </tr>
      <tr>
          <td>tree</td>
          <td>功能是以树形结构显示目录下的内容。</td>
      </tr>
      <tr>
          <td>basename</td>
          <td>显示文件名或目录名。</td>
      </tr>
      <tr>
          <td>dirname</td>
          <td>显示文件或目录路径。</td>
      </tr>
      <tr>
          <td>chattr</td>
          <td>改变文件的扩展属性。</td>
      </tr>
      <tr>
          <td>lsattr</td>
          <td>查看文件扩展属性。</td>
      </tr>
      <tr>
          <td>file</td>
          <td>显示文件的类型。</td>
      </tr>
      <tr>
          <td>md5sum</td>
          <td>计算和校验文件的 MD5 值。</td>
      </tr>
      <tr>
          <td>查看文件及内容处理命令（21 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>cat</td>
          <td>全拼 concatenate，功能是用于连接多个文件并且打印到屏幕输出或重定向到指定文件中。</td>
      </tr>
      <tr>
          <td>tac</td>
          <td>tac 是 cat 的反向拼写，因此命令的功能为反向显示文件内容。</td>
      </tr>
      <tr>
          <td>more</td>
          <td>分页显示文件内容。</td>
      </tr>
      <tr>
          <td>less</td>
          <td>分页显示文件内容，more 命令的相反用法。</td>
      </tr>
      <tr>
          <td>head</td>
          <td>显示文件内容的头部。</td>
      </tr>
      <tr>
          <td>tail</td>
          <td>显示文件内容的尾部。</td>
      </tr>
      <tr>
          <td>cut</td>
          <td>将文件的每一行按指定分隔符分割并输出。</td>
      </tr>
      <tr>
          <td>split</td>
          <td>分割文件为不同的小片段。</td>
      </tr>
      <tr>
          <td>paste</td>
          <td>按行合并文件内容。</td>
      </tr>
      <tr>
          <td>sort</td>
          <td>对文件的文本内容排序。</td>
      </tr>
      <tr>
          <td>uniq</td>
          <td>去除重复行。oldboy</td>
      </tr>
      <tr>
          <td>wc</td>
          <td>统计文件的行数、单词数或字节数。</td>
      </tr>
      <tr>
          <td>iconv</td>
          <td>转换文件的编码格式。</td>
      </tr>
      <tr>
          <td>dos2unix</td>
          <td>将 DOS 格式文件转换成 UNIX 格式。</td>
      </tr>
      <tr>
          <td>diff</td>
          <td>全拼 difference，比较文件的差异，常用于文本文件。</td>
      </tr>
      <tr>
          <td>vimdiff</td>
          <td>命令行可视化文件比较工具，常用于文本文件。</td>
      </tr>
      <tr>
          <td>rev</td>
          <td>反向输出文件内容。</td>
      </tr>
      <tr>
          <td>grep/egrep</td>
          <td>过滤字符串，三剑客老三。</td>
      </tr>
      <tr>
          <td>join</td>
          <td>按两个文件的相同字段合并。</td>
      </tr>
      <tr>
          <td>tr</td>
          <td>替换或删除字符。</td>
      </tr>
      <tr>
          <td>vi/vim</td>
          <td>命令行文本编辑器。</td>
      </tr>
      <tr>
          <td>文件压缩及解压缩命令（4 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>tar</td>
          <td>打包压缩。oldboy</td>
      </tr>
      <tr>
          <td>unzip</td>
          <td>解压文件。</td>
      </tr>
      <tr>
          <td>gzip</td>
          <td>gzip 压缩工具。</td>
      </tr>
      <tr>
          <td>zip</td>
          <td>压缩工具。</td>
      </tr>
      <tr>
          <td>信息显示命令（11 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>uname</td>
          <td>显示操作系统相关信息的命令。</td>
      </tr>
      <tr>
          <td>hostname</td>
          <td>显示或者设置当前系统的主机名。</td>
      </tr>
      <tr>
          <td>dmesg</td>
          <td>显示开机信息，用于诊断系统故障。</td>
      </tr>
      <tr>
          <td>uptime</td>
          <td>显示系统运行时间及负载。</td>
      </tr>
      <tr>
          <td>stat</td>
          <td>显示文件或文件系统的状态。</td>
      </tr>
      <tr>
          <td>du</td>
          <td>计算磁盘空间使用情况。</td>
      </tr>
      <tr>
          <td>df</td>
          <td>报告文件系统磁盘空间的使用情况。</td>
      </tr>
      <tr>
          <td>top</td>
          <td>实时显示系统资源使用情况。</td>
      </tr>
      <tr>
          <td>free</td>
          <td>查看系统内存。</td>
      </tr>
      <tr>
          <td>date</td>
          <td>显示与设置系统时间。</td>
      </tr>
      <tr>
          <td>cal</td>
          <td>查看日历等时间信息。</td>
      </tr>
      <tr>
          <td>搜索文件命令（4 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>which</td>
          <td>查找二进制命令，按环境变量 PATH 路径查找。</td>
      </tr>
      <tr>
          <td>find</td>
          <td>从磁盘遍历查找文件或目录。</td>
      </tr>
      <tr>
          <td>whereis</td>
          <td>查找二进制命令，按环境变量 PATH 路径查找。</td>
      </tr>
      <tr>
          <td>locate</td>
          <td>从数据库 (/var/lib/mlocate/mlocate.db) 查找命令，使用 updatedb 更新库。</td>
      </tr>
      <tr>
          <td>用户管理命令（10 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>useradd</td>
          <td>添加用户。</td>
      </tr>
      <tr>
          <td>usermod</td>
          <td>修改系统已经存在的用户属性。</td>
      </tr>
      <tr>
          <td>userdel</td>
          <td>删除用户。</td>
      </tr>
      <tr>
          <td>groupadd</td>
          <td>添加用户组。</td>
      </tr>
      <tr>
          <td>passwd</td>
          <td>修改用户密码。</td>
      </tr>
      <tr>
          <td>chage</td>
          <td>修改用户密码有效期限。</td>
      </tr>
      <tr>
          <td>id</td>
          <td>查看用户的 uid,gid 及归属的用户组。</td>
      </tr>
      <tr>
          <td>su</td>
          <td>切换用户身份。</td>
      </tr>
      <tr>
          <td>visudo</td>
          <td>编辑 / etc/sudoers 文件的专属命令。</td>
      </tr>
      <tr>
          <td>sudo</td>
          <td>以另外一个用户身份（默认 root 用户）执行事先在 sudoers 文件允许的命令。</td>
      </tr>
      <tr>
          <td>基础网络操作命令（11 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>telnet</td>
          <td>使用 TELNET 协议远程登录。</td>
      </tr>
      <tr>
          <td>ssh</td>
          <td>使用 SSH 加密协议远程登录。</td>
      </tr>
      <tr>
          <td>scp</td>
          <td>全拼 secure copy，用于不同主机之间复制文件。</td>
      </tr>
      <tr>
          <td>wget</td>
          <td>命令行下载文件。</td>
      </tr>
      <tr>
          <td>ping</td>
          <td>测试主机之间网络的连通性。</td>
      </tr>
      <tr>
          <td>route</td>
          <td>显示和设置 linux 系统的路由表。</td>
      </tr>
      <tr>
          <td>ifconfig</td>
          <td>查看、配置、启用或禁用网络接口的命令。</td>
      </tr>
      <tr>
          <td>ifup</td>
          <td>启动网卡。</td>
      </tr>
      <tr>
          <td>ifdown</td>
          <td>关闭网卡。</td>
      </tr>
      <tr>
          <td>netstat</td>
          <td>查看网络状态。</td>
      </tr>
      <tr>
          <td>ss</td>
          <td>查看网络状态。</td>
      </tr>
      <tr>
          <td>深入网络操作命令（9 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>nmap</td>
          <td>网络扫描命令。</td>
      </tr>
      <tr>
          <td>lsof</td>
          <td>全名 list open files，也就是列举系统中已经被打开的文件。</td>
      </tr>
      <tr>
          <td>mail</td>
          <td>发送和接收邮件。</td>
      </tr>
      <tr>
          <td>mutt</td>
          <td>邮件管理命令。</td>
      </tr>
      <tr>
          <td>nslookup</td>
          <td>交互式查询互联网 DNS 服务器的命令。</td>
      </tr>
      <tr>
          <td>dig</td>
          <td>查找 DNS 解析过程。</td>
      </tr>
      <tr>
          <td>host</td>
          <td>查询 DNS 的命令。</td>
      </tr>
      <tr>
          <td>traceroute</td>
          <td>追踪数据传输路由状况。</td>
      </tr>
      <tr>
          <td>tcpdump</td>
          <td>命令行的抓包工具。</td>
      </tr>
      <tr>
          <td>有关磁盘与文件系统的命令（16 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>mount</td>
          <td>挂载文件系统。</td>
      </tr>
      <tr>
          <td>umount</td>
          <td>卸载文件系统。</td>
      </tr>
      <tr>
          <td>fsck</td>
          <td>检查并修复 Linux 文件系统。</td>
      </tr>
      <tr>
          <td>dd</td>
          <td>转换或复制文件。</td>
      </tr>
      <tr>
          <td>dumpe2fs</td>
          <td>导出 ext2/ext3/ext4 文件系统信息。</td>
      </tr>
      <tr>
          <td>dump</td>
          <td>ext2/3/4 文件系统备份工具。</td>
      </tr>
      <tr>
          <td>fdisk</td>
          <td>磁盘分区命令，适用于 2TB 以下磁盘分区。</td>
      </tr>
      <tr>
          <td>parted</td>
          <td>磁盘分区命令，没有磁盘大小限制，常用于 2TB 以下磁盘分区。</td>
      </tr>
      <tr>
          <td>mkfs</td>
          <td>格式化创建 Linux 文件系统。</td>
      </tr>
      <tr>
          <td>partprobe</td>
          <td>更新内核的硬盘分区表信息。</td>
      </tr>
      <tr>
          <td>e2fsck</td>
          <td>检查 ext2/ext3/ext4 类型文件系统。</td>
      </tr>
      <tr>
          <td>mkswap</td>
          <td>创建 Linux 交换分区。</td>
      </tr>
      <tr>
          <td>swapon</td>
          <td>启用交换分区。</td>
      </tr>
      <tr>
          <td>swapoff</td>
          <td>关闭交换分区。</td>
      </tr>
      <tr>
          <td>sync</td>
          <td>将内存缓冲区内的数据写入磁盘。</td>
      </tr>
      <tr>
          <td>resize2fs</td>
          <td>调整 ext2/ext3/ext4 文件系统大小。</td>
      </tr>
      <tr>
          <td>系统权限及用户授权相关命令（4 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>chmod</td>
          <td>改变文件或目录权限。</td>
      </tr>
      <tr>
          <td>chown</td>
          <td>改变文件或目录的属主和属组。</td>
      </tr>
      <tr>
          <td>chgrp</td>
          <td>更改文件用户组。</td>
      </tr>
      <tr>
          <td>umask</td>
          <td>显示或设置权限掩码。</td>
      </tr>
      <tr>
          <td>查看系统用户登陆信息的命令（7 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>whoami</td>
          <td>显示当前有效的用户名称，相当于执行 id -un 命令。</td>
      </tr>
      <tr>
          <td>who</td>
          <td>显示目前登录系统的用户信息。</td>
      </tr>
      <tr>
          <td>w</td>
          <td>显示已经登陆系统的用户列表，并显示用户正在执行的指令。</td>
      </tr>
      <tr>
          <td>last</td>
          <td>显示登入系统的用户。</td>
      </tr>
      <tr>
          <td>lastlog</td>
          <td>显示系统中所有用户最近一次登录信息。</td>
      </tr>
      <tr>
          <td>users</td>
          <td>显示当前登录系统的所有用户的用户列表。</td>
      </tr>
      <tr>
          <td>finger</td>
          <td>查找并显示用户信息。</td>
      </tr>
      <tr>
          <td>内置命令及其它（19 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>echo</td>
          <td>打印变量，或直接输出指定的字符串</td>
      </tr>
      <tr>
          <td>printf</td>
          <td>将结果格式化输出到标准输出。</td>
      </tr>
      <tr>
          <td>rpm</td>
          <td>管理 rpm 包的命令。</td>
      </tr>
      <tr>
          <td>yum</td>
          <td>自动化简单化地管理 rpm 包的命令。</td>
      </tr>
      <tr>
          <td>watch</td>
          <td>周期性的执行给定的命令，并将命令的输出以全屏方式显示。</td>
      </tr>
      <tr>
          <td>alias</td>
          <td>设置系统别名。</td>
      </tr>
      <tr>
          <td>unalias</td>
          <td>取消系统别名。</td>
      </tr>
      <tr>
          <td>date</td>
          <td>查看或设置系统时间。</td>
      </tr>
      <tr>
          <td>clear</td>
          <td>清除屏幕，简称清屏。</td>
      </tr>
      <tr>
          <td>history</td>
          <td>查看命令执行的历史纪录。</td>
      </tr>
      <tr>
          <td>eject</td>
          <td>弹出光驱。</td>
      </tr>
      <tr>
          <td>time</td>
          <td>计算命令执行时间。</td>
      </tr>
      <tr>
          <td>nc</td>
          <td>功能强大的网络工具。</td>
      </tr>
      <tr>
          <td>xargs</td>
          <td>将标准输入转换成命令行参数。</td>
      </tr>
      <tr>
          <td>exec</td>
          <td>调用并执行指令的命令。</td>
      </tr>
      <tr>
          <td>export</td>
          <td>设置或者显示环境变量。</td>
      </tr>
      <tr>
          <td>unset</td>
          <td>删除变量或函数。</td>
      </tr>
      <tr>
          <td>type</td>
          <td>用于判断另外一个命令是否是内置命令。</td>
      </tr>
      <tr>
          <td>bc</td>
          <td>命令行科学计算器</td>
      </tr>
      <tr>
          <td>系统管理与性能监视命令 (9 个)</td>
          <td></td>
      </tr>
      <tr>
          <td>chkconfig</td>
          <td>管理 Linux 系统开机启动项。</td>
      </tr>
      <tr>
          <td>vmstat</td>
          <td>虚拟内存统计。</td>
      </tr>
      <tr>
          <td>mpstat</td>
          <td>显示各个可用 CPU 的状态统计。</td>
      </tr>
      <tr>
          <td>iostat</td>
          <td>统计系统 IO。</td>
      </tr>
      <tr>
          <td>sar</td>
          <td>全面地获取系统的 CPU、运行队列、磁盘 I/O、分页（交换区）、内存、 CPU 中断和网络等性能数据。</td>
      </tr>
      <tr>
          <td>ipcs</td>
          <td>用于报告 Linux 中进程间通信设施的状态，显示的信息包括消息列表、共享内存和信号量的信息。</td>
      </tr>
      <tr>
          <td>ipcrm</td>
          <td>用来删除一个或更多的消息队列、信号量集或者共享内存标识。</td>
      </tr>
      <tr>
          <td>strace</td>
          <td>用于诊断、调试 Linux 用户空间跟踪器。我们用它来监控用户空间进程和内核的交互，比如系统调用、信号传递、进程状态变更等。</td>
      </tr>
      <tr>
          <td>ltrace</td>
          <td>命令会跟踪进程的库函数调用, 它会显现出哪个库函数被调用。</td>
      </tr>
      <tr>
          <td>关机 / 重启 / 注销和查看系统信息的命令（6 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>shutdown</td>
          <td>关机。</td>
      </tr>
      <tr>
          <td>halt</td>
          <td>关机。</td>
      </tr>
      <tr>
          <td>poweroff</td>
          <td>关闭电源。</td>
      </tr>
      <tr>
          <td>logout</td>
          <td>退出当前登录的 Shell。</td>
      </tr>
      <tr>
          <td>exit</td>
          <td>退出当前登录的 Shell。</td>
      </tr>
      <tr>
          <td>Ctrl+d</td>
          <td>退出当前登录的 Shell 的快捷键。</td>
      </tr>
      <tr>
          <td>进程管理相关命令（15 个）</td>
          <td></td>
      </tr>
      <tr>
          <td>bg</td>
          <td>将一个在后台暂停的命令，变成继续执行 （在后台执行）。</td>
      </tr>
      <tr>
          <td>fg</td>
          <td>将后台中的命令调至前台继续运行。</td>
      </tr>
      <tr>
          <td>jobs</td>
          <td>查看当前有多少在后台运行的命令。</td>
      </tr>
      <tr>
          <td>kill</td>
          <td>终止进程。</td>
      </tr>
      <tr>
          <td>killall</td>
          <td>通过进程名终止进程。</td>
      </tr>
      <tr>
          <td>pkill</td>
          <td>通过进程名终止进程。</td>
      </tr>
      <tr>
          <td>crontab</td>
          <td>定时任务命令。</td>
      </tr>
      <tr>
          <td>ps</td>
          <td>显示进程的快照。</td>
      </tr>
      <tr>
          <td>pstree</td>
          <td>树形显示进程。</td>
      </tr>
      <tr>
          <td>nice/renice</td>
          <td>调整程序运行的优先级。</td>
      </tr>
      <tr>
          <td>nohup</td>
          <td>忽略挂起信号运行指定的命令。</td>
      </tr>
      <tr>
          <td>pgrep</td>
          <td>查找匹配条件的进程。</td>
      </tr>
      <tr>
          <td>runlevel</td>
          <td>查看系统当前运行级别。</td>
      </tr>
      <tr>
          <td>init</td>
          <td>切换运行级别。</td>
      </tr>
      <tr>
          <td>service</td>
          <td>启动、停止、重新启动和关闭系统服务，还可以显示所有系统服务的当前状态。</td>
      </tr>
  </tbody>
</table>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">小马哥</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>3 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-379/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default1_hu_33478ca164b4fce4.webp" type="image/webp" />
      <img src="/images/default1.jpg" alt="/images/default1.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">wget下载JDK</h2>

    <p class="date text-base-content/60">
    
      Thursday, Nov 16, 2017
    
    </p>

    <p>大家都知道jdk无法直接通过wget下载。原来需要cookie，如下：</p>
<p>一、下载</p>
<pre tabindex="0"><code>wget --no-check-certificate --no-cookie --header &#34;Cookie: oraclelicense=accept-securebackup-cookie;&#34; http://download.oracle.com/otn/java/jdk/7u80-b15/jdk-7u80-linux-x64.rpm
sudo rpm -ivh jdk-7u79-linux-x64.rpm
</code></pre><p>现在下载的要求又有所变化，用原来的方式已经不行了。是动态的生成一个参数。</p>
<p>解决办法： 在chrome下，打开开发者工具（本人用的mac版本），点击所需要下载的包，看console-&gt;logs会看到一行字：</p>
<pre tabindex="0"><code>Resource interpreted as Document but transferred with MIME type application/x-redhat-package-manager: &#34;http://download.oracle.com/otn/java/jdk/7u80-b15/jdk-7u80-linux-x64.rpm?AuthParam=1461049990_341c3c217ccd4554c0a065149ff156c8&#34;.
</code></pre><p>，于是，直接使用这个就好了。</p>
<pre tabindex="0"><code>wget -O jdk-7u80-linux-x64.rpm http://download.oracle.com/otn/java/jdk/7u80-b15/jdk-7u80-linux-x64.rpm?AuthParam=1461049990_341c3c217ccd4554c0a065149ff156c8  
</code></pre><p>64位</p>
<pre tabindex="0"><code>wget --no-cookies --no-check-certificate --header &#34;Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie&#34; &#34;http://download.oracle.com/otn-pub/java/jdk/8u141-b15/336fa29ff2bb4ef291e347e091f7f4a7/jdk-8u141-linux-x64.tar.gz&#34;
</code></pre><p>32位</p>
<pre tabindex="0"><code>wget --no-cookies --no-check-certificate --header &#34;Cookie: gpw_e24=http%3A%2F%2Fwww.oracle.com%2F; oraclelicense=accept-securebackup-cookie&#34; &#34;http://download.oracle.com/otn-pub/java/jdk/8u141-b15/336fa29ff2bb4ef291e347e091f7f4a7/jdk-8u141-linux-i586.tar.gz&#34;
tar xzf jdk-8u141-linux-i586.tar.gz
</code></pre><p>解压</p>
<pre tabindex="0"><code>tar xzf jdk-8u141-linux-x64.tar.gz
</code></pre><p>配置环境变量</p>
<pre tabindex="0"><code>JAVA_HOME=/usr/local/java/jdk1.8/
JRE_HOME=/usr/local/java/jdk1.8/jre
CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib
PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin
export JAVA_HOME JRE_HOME CLASS_PATH PATH
</code></pre><p>为了让环境变量即时生效，输入 <code>source /etc/profile</code> 即可。</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-380/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">阿里云ECS CentOS7.4 64位系统安装nginx</h2>

    <p class="date text-base-content/60">
    
      Thursday, Nov 16, 2017
    
    </p>

    <p>下载</p>
<pre tabindex="0"><code>wget http://nginx.org/download/nginx-1.10.3.tar.gz
</code></pre><p>解压</p>
<pre tabindex="0"><code>tar -zxvf nginx-1.10.3.tar.gz
</code></pre><p>源码编译准备</p>
<pre tabindex="0"><code>./configure --prefix=/usr/local/src/nginx --conf-path=/usr/local/src/nginx/nginx.conf 
</code></pre><p>安装 环境</p>
<pre tabindex="0"><code>yum -y install pcre-devel


yum install -y zlib-devel
</code></pre><p>编译</p>
<pre tabindex="0"><code>make
</code></pre><p>安装</p>
<pre tabindex="0"><code>make install
</code></pre><p>添加环境变量 nginx/sbin</p>
<p>启动</p>
<pre tabindex="0"><code>./nginx -c /usr/local/src/nginx/conf/nginx.conf
</code></pre><p>通过ps -A命令查看nginx进程状态，确认nginx已启动:</p>
<p>ps -A | grep nginx</p>
<p>此时，输入服务器域名或公网IP，可以nginx的欢迎页面，表明nginx web服务器已经成功安装</p>
<p>停止 nginx</p>
<pre tabindex="0"><code>ps -ef|grep nginx
</code></pre><p>从容停止Nginx：</p>
<pre tabindex="0"><code>kill -QUIT 主进程号  
</code></pre><p>例如：kill -QUIT 16391</p>
<p>快速停止Nginx：</p>
<pre tabindex="0"><code>kill -TERM 主进程号  
</code></pre><p>强制停止Nginx：</p>
<pre tabindex="0"><code>kill -9 主进程号
</code></pre><p>后面详细介绍一下配置文件</p>
<pre tabindex="0"><code>user www www;
worker_processes 2; #设置值和CPU核心数一致
error_log /usr/local/webserver/nginx/logs/nginx_error.log crit; #日志位置和日志级别
pid /usr/local/webserver/nginx/nginx.pid;
#Specifies the value for maximum file descriptors that can be opened by this process.
worker_rlimit_nofile 65535;
events
{
  use epoll;
  worker_connections 65535;
}
http
{
  include mime.types;
  default_type application/octet-stream;
  log_format main  &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;
               &#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;
               &#39;&#34;$http_user_agent&#34; $http_x_forwarded_for&#39;;
  
#charset gb2312;
     
  server_names_hash_bucket_size 128;
  client_header_buffer_size 32k;
  large_client_header_buffers 4 32k;
  client_max_body_size 8m;
     
  sendfile on;
  tcp_nopush on;
  keepalive_timeout 60;
  tcp_nodelay on;
  fastcgi_connect_timeout 300;
  fastcgi_send_timeout 300;
  fastcgi_read_timeout 300;
  fastcgi_buffer_size 64k;
  fastcgi_buffers 4 64k;
  fastcgi_busy_buffers_size 128k;
  fastcgi_temp_file_write_size 128k;
  gzip on; 
  gzip_min_length 1k;
  gzip_buffers 4 16k;
  gzip_http_version 1.0;
  gzip_comp_level 2;
  gzip_types text/plain application/x-javascript text/css application/xml;
  gzip_vary on;
 
  #limit_zone crawler $binary_remote_addr 10m;
 #下面是server虚拟主机的配置
 server
  {
    listen 80;#监听端口
    server_name localhost;#域名
    index index.html index.htm index.php;
    root /usr/local/webserver/nginx/html;#站点目录
      location ~ .*\.(php|php5)?$
    {
      #fastcgi_pass unix:/tmp/php-cgi.sock;
      fastcgi_pass 127.0.0.1:9000;
      fastcgi_index index.php;
      include fastcgi.conf;
    }
    location ~ .*\.(gif|jpg|jpeg|png|bmp|swf|ico)$
    {
      expires 30d;
  # access_log off;
    }
    location ~ .*\.(js|css)?$
    {
      expires 15d;
   # access_log off;
    }
    access_log off;
  }

}
</code></pre>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>2 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
    </div>
    

    
    <div class="flex justify-center pt-8">
      <div class="join grid grid-cols-2">
  
  <a href="/categories/page/17/" title=Previous&#32;page class="join-item btn btn-outline btn-sm">
    Previous page
  </a>
  
  
  <a href="/categories/page/19/" title="Next page" class="join-item btn btn-outline btn-sm">
    Next page
  </a>
  
</div>

    </div>
    
  </div>
</div>



            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 Cuitpanfei Site</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 Cuitpanfei Site</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme =  null 
  window.darkTheme =  null 
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
  <script src="/js/grid.js"></script>




<script src="/js/main.js"></script>

    





    

    

    

    

    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js" integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin="anonymous"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js" integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin="anonymous"></script>
  </body>
</html>
