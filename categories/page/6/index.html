<!DOCTYPE html>
<html lang="en-us"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>


All Categories | Cuitpanfei Site</title>

    

<link rel="canonical" href="http://localhost:1313/categories/" />



<meta name="author" content="" />
<meta name="description" content="" />



<meta name="generator" content="Hugo 0.150.0">


<meta property="og:url" content="http://localhost:1313/categories/">
  <meta property="og:site_name" content="Cuitpanfei Site">
  <meta property="og:title" content="Categories">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Categories">




<link rel="stylesheet" href="/css/output.css" />




     

    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js" integrity="sha256-4EHxtjnR5rL8JzbY12OKQJr81ESm7JBEb49ORPo29AY=" crossorigin="anonymous"></script>
  </head>

  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav class="mt-4 lg:mt-8 py-4">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/" alt="" />
        </div>
      </div>

      
    </section>

    
    

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md">
        
























<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      

      
      





      
      





      
      





      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="Archives">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="All Categories">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="All Tags">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      

      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            


<div class="flex flex-col md:flex-row mt-4">

  <div class="md:basis-[200px] lg:basis-[300px] p-4 prose dark:prose-invert">
    <h1 class="text-2xl">All Categories</h1>
    <p class="text-sm">18 categories</p>
    <div class="flex flex-wrap gap-4 mt-6">
      
      <a href="/categories/docker/" class="badge h-6 no-underline hover:badge-primary">
        Docker
      </a>
      
      <a href="/categories/ide/" class="badge h-6 no-underline hover:badge-primary">
        IDE
      </a>
      
      <a href="/categories/java/" class="badge h-6 no-underline hover:badge-primary">
        Java
      </a>
      
      <a href="/categories/maven/" class="badge h-6 no-underline hover:badge-primary">
        Maven
      </a>
      
      <a href="/categories/nas/" class="badge h-6 no-underline hover:badge-primary">
        NAS
      </a>
      
      <a href="/categories/spring-cloud/" class="badge h-6 no-underline hover:badge-primary">
        Spring Cloud
      </a>
      
      <a href="/categories/springboot/" class="badge h-6 no-underline hover:badge-primary">
        SpringBoot
      </a>
      
      <a href="/categories/%E5%89%8D%E7%AB%AF/" class="badge h-6 no-underline hover:badge-primary">
        前端
      </a>
      
      <a href="/categories/%E5%A5%BD%E7%8E%A9%E6%8A%80%E5%B7%A7/" class="badge h-6 no-underline hover:badge-primary">
        好玩技巧
      </a>
      
      <a href="/categories/%E5%BB%BA%E7%AB%99/" class="badge h-6 no-underline hover:badge-primary">
        建站
      </a>
      
      <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="badge h-6 no-underline hover:badge-primary">
        数据库
      </a>
      
      <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="badge h-6 no-underline hover:badge-primary">
        数据结构与算法
      </a>
      
      <a href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/" class="badge h-6 no-underline hover:badge-primary">
        架构设计
      </a>
      
      <a href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" class="badge h-6 no-underline hover:badge-primary">
        版本控制
      </a>
      
      <a href="/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/" class="badge h-6 no-underline hover:badge-primary">
        虚拟机
      </a>
      
      <a href="/categories/%E8%AF%AD%E8%A8%80/" class="badge h-6 no-underline hover:badge-primary">
        语言
      </a>
      
      <a href="/categories/%E8%BF%90%E7%BB%B4/" class="badge h-6 no-underline hover:badge-primary">
        运维
      </a>
      
      <a href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/" class="badge h-6 no-underline hover:badge-primary">
        默认分类
      </a>
      
    </div>
  </div>
  
  <div class="divider divider-vertical md:divider-horizontal px-4 md:px-0"></div>
  
  <div class="flex-1">
    

    
    <div class="dream-grid">
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-25/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default3_hu_599e07ea93afc07d.webp" type="image/webp" />
      <img src="/images/default3.jpg" alt="/images/default3.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">生育假政策-成都</h2>

    <p class="date text-base-content/60">
    
      Thursday, Dec 30, 2021
    
    </p>

    <h1 id="写在前面">写在前面</h1>
<p>因为老婆要生育了，在和公司沟通中发现一些理解偏差问题，在网上搜到的假期的结果也是千奇百怪，所以这里专门整理一下成都的生育政策，主要是生育假相关政策。</p>
<p><strong>需要提前说明的是，实际享受的生育假只可能是大于等于国家规定的假期的。<strong>因为一般生育假都是</strong>国家层面+当地政策</strong>共同实现的</p>
<h1 id="各方政策">各方政策</h1>
<p>首先，是国家层面的，<strong>国家法定产假是98天</strong>。</p>
<p>支撑条例或规定：<a href="http://www.gov.cn/flfg/2012-05/07/content_2131582.htm" target="_blank">《女职工劳动保护特别规定》</a>
第七条规定:</p>



  <blockquote>
    <p>女职工生育享受98天产假，其中产前可以休假15天；难产的，增加产假15天；生育多胞胎的，每多生育1个婴儿，增加产假15天。
女职工怀孕未满4个月流产的，享受15天产假；怀孕满4个月流产的，享受42天产假。</p>
  </blockquote>

<p><a href="http://www.gov.cn/flfg/2012-05/07/content_2131582.htm" target="_blank">《女职工劳动保护特别规定》</a>
已经2012年4月18日国务院第200次常务会议通过,并在2012年05月07日 16时08分公布，自公布日开始执行。</p>
<p>其次，是当地政策，这里就是指四川成都了，<strong>四川延长女方生育假60天</strong>，注意是<strong>延长</strong>，不是修改！</p>
<p><a href="https://m12333.cn/policy/idck.html" target="_blank">《四川省人口与计划生育条例（2021年修正）》</a>
 第二十四条规定:</p>



  <blockquote>
    <p>符合本条例规定生育子女的夫妻，除法律、法规规定外，延长女方生育假六十天，给予男方护理假二十天。生育假、护理假视为出勤，工资福利待遇不变。县级以上地方人民政府及用人单位应当保障生育假、护理假待遇落实。</p>
  </blockquote>




  <blockquote>
    <p>子女三周岁以下的夫妻，每年分别享受累计十天的育儿假，育儿假视为出勤。</p>
  </blockquote>

<p>关于<code>符合本条例规定生育子女的夫妻</code>这一主体，在<a href="https://m12333.cn/policy/idck.html" target="_blank">《四川省人口与计划生育条例（2021年修正）》</a>
 的第一章 第二条做出了说明：</p>



  <blockquote>
    <p>本条例适用于本省行政区域内的国家机关、社会团体、企业事业单位、群众性自治组织和公民以及户籍在本省而离开本省行政区域的公民。</p>
  </blockquote>

<p>这里很明确的指出了，<code>符合本条例规定生育子女的夫妻</code>这一主体是指的：</p>
<ol>
<li>在四川的国家机关的夫妻</li>
<li>在四川的社会团体的夫妻</li>
<li>在四川的企业单位的夫妻</li>
<li>在四川的事业单位的夫妻</li>
<li>在四川的<strong>群众性自治组织</strong>的夫妻</li>
<li><strong>在四川的公民</strong></li>
<li><strong>户籍在四川的但人不在四川的公民</strong></li>
</ol>
<p>上述涵盖面非常广了，所以，一般来说，只要你在<strong>四川上班或者户籍在四川</strong>，都是适用这个规定的。</p>
<h1 id="后话">后话</h1>
<p>可以明显看见<a href="https://m12333.cn/policy/idck.html" target="_blank">《四川省人口与计划生育条例（2021年修正）》</a>
 这一规定是2021修正版的，那么，四川是在哪一年增加的女方60天产假的呢？答案是2016年。</p>
<p>四川省第十二届人民代表大会常务委员会公告第61号文件，<a href="https://m12333.cn/policy/mzzm.html" target="_blank">四川省人口与计划生育条例（2016年）</a>
的<code>第五章 奖励与社会保障  第二十六条</code>首次正式添加了这一规定。</p>



  <blockquote>
    <p>符合本条例规定生育子女的夫妻，除法律、法规规定外，延长女方生育假60天，给予男方护理假 20天。生育假、护理假视为出勤，工资福利待遇不变。</p>
  </blockquote>

<p>细心的人肯定注意到了，2021年的修正，除了把这一条从第二十六条改在为第二十四条外，还添加了育儿假的福利细则。关于育儿假详细说明的，我会在后面一篇文章说明。</p>
<h1 id="总结">总结</h1>
<p>所以在四川，女方的生育假，也就是产假，实际天数为：98+60=158天
男方的护理假，也就是陪产假，为20天。</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-265/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">我做系统架构的一些原则（转载）</h2>

    <p class="date text-base-content/60">
    
      Sunday, Dec 26, 2021
    
    </p>

    <p>工作 20 多年了，这 20 来年看到了很多公司系统架构，也看到了很多问题，在跟这些公司进行交流和讨论的时候，包括进行实施和方案比较的时候，都有很多各种方案的比较和妥协，因为相关的经历越来越多，所以，逐渐形成了自己的逻辑和方法论。今天，想写下这篇文章，把我的这些个人的经验和想法总结下来，希望能够让更多的人可以参考和借鉴，并能够做出更好的架构来。另外，我的这些思维方式和原则都针对于现有市面上众多不合理的架构和方案，所以，也算是一种“纠正”……（注意，这篇文章所说的这些架构上的原则，一般适用于相对比较复杂的业务，如果只是一些简单和访问量不大的应用，那么你可能会得出相反的结论）</p>
<h4 id="原则一关注于真正的收益而不是技术本身">原则一：关注于真正的收益而不是技术本身</h4>
<p>对于软件架构来说，我觉得第一重要的是架构的收益，如果不说收益，只是为了技术而技术，而没有任何意义。对于技术收益来说，我觉得下面这几个收益是非常重要的：</p>
<ul>
<li><strong>是否可以降低技术门槛加快整个团队的开发流程</strong>。能够加快整个团队的工程流程，快速发布，是软件工程一直在解决的问题，所以，系统架构需要能够进行并行开发，并行上线和并行运维，而不会让某个团队成为瓶颈点。（注：就算拖累团队的原因是组织构架，也不妨碍我们做出并行的系统架构设计）</li>
<li><strong>是否可以让整个系统可以运行的更稳定</strong>。要让整个系统可以运行的更为的稳定，提升整个系统的 SLA，就需要对有计划和无计划的停机做相应的解决方案（参看《<a href="https://coolshell.cn/articles/17459.html" target="_blank">关于高可用的架构</a>
》）</li>
<li><strong>是否可以通过简化和自动化降低成本</strong>。最高优化的成本是人力成本，人的成本除了慢和贵，还有经常不断的 human error。如果不能降低人力成本，反而需要更多的人，那么这个架构设计一定是失败的。除此之外，是时间成本，资金成本。</li>
</ul>
<p>如果一个系统架构不能在上面三个事上起到作用，那就没有意义了。</p>
<h4 id="原则二以应用服务和-api-为视角而不是以资源和技术为视角">原则二：以应用服务和 API 为视角，而不是以资源和技术为视角</h4>
<p>国内很多公司都会有很多分工，基本上都会分成运维和开发，运维又会分成基础运维和应用运维，开发则会分成基础核心开发和业务开发。不同的分工会导致完全不同的视角和出发点。比如，基础运维和开发的同学更多的只是关注资源的利用率和性能，而应用运维和业务开发则更多关注的是应用和服务上的东西。这两者本来相关无事，但是因为分布式架构的演进，导致有一些系统已经说不清楚是基础层的还是应用层的了，比如像服务治理上的东西，里面即有底层基础技术，也需要业务的同学来配合，包括 k8s 也样，里面即有底层的如网络这样的技术，也有需要业务配合的 readniess和 liveness 这样的健康检查，以及业务应用需要 configMap 等等 ……</p>
<p><strong>这些东西都让我感觉到所谓 DevOps，其实就是因为很多技术和组件已经分不清是 Dev 还是 Ops 的了，所以，需要合并 Dev和 Ops</strong>。而且，整个组织和架构的优化，已经不能通过调优单一分工或是单一组件能够有很大提升的了。其需要有一种自顶向下的，整体规划，统一设计的方式，才能做到整体的提升（可以试想一下城市交通的优化，当城市规模到一定程度的时候，整体的性能你是无法通过优化几条路或是几条街区来完成的，你需要对整个城市做整体的功能体的规划才可能达到整体效率的提升）。而为了做到整体的提升，需要所有的人都要有一个统一的视角和目标，这几年来，我觉得这个目标就是——<strong>要站在服务和 对外API的视角来看问题，而不是技术和底层的角度。</strong></p>
<h4 id="原则三选择最主流和成熟的技术">原则三：选择最主流和成熟的技术</h4>
<p>技术选型是一件很重要的事，技术一旦选错，那会导致整个架构需要做调整，而对架构的调整重来都不是一件简单的事，我在过去几年内，当系统越来越复杂的时候，用户把他们的 PHP，Python, .NET，或 Node.js 的架构完全都迁移到 Java + Go 的架构上来的案例不断的发生。这个过程还是非常痛苦的，但是你没有办法，当你的系统越来越复杂，越来越大时，你就再也不能在一些玩具技术上玩了，你需要的更为工业化的技术。</p>
<ul>
<li><strong>尽可能的使用更为成熟更为工业化的技术栈，而不是自己熟悉的技术栈</strong>。所谓工业化的技术栈，你可以看看大多数公司使用的技术栈，比如：互联网，金融，电信……等等 ，大公司会有更多的技术投入，也需要更大规模的生产，所以，他们使用的技术通常来说都是比较工业化的。在技术选型上，千万不要被——“你看某个公司也在用这个技术”，或是一些在论坛上看到的一些程序员吐槽技术的观点（没有任何的数据，只有自己的喜好）来决定自己的技术，还是看看主流大多数公司实际在用的技术栈，会更靠谱一些。</li>
<li><strong>选择全球流行的技术，而不是中国流行的技术</strong>。技术这个东西一定是一个全球化的东西，不是一个局域化的事。所以，一定要选国际化的会更好。另外，千万不要被某些公司的“特别案例”骗过去了，那怕这个案例很性感，关键还是要看解决问题的思路和采用的技术是否具有普世性。只有普世性的技术有更强的生命力。</li>
<li><strong>尽可能的使用红利大的主流技术，而不要自己发明轮子，更不要魔改</strong>。我见过好些个公司魔改开源软件，比如有个公司同魔改mesos，最后改着改着发现自己发明另一个 kubernetes。我还见过很多公司或技术团队喜欢自己发明自己的专用轮子，最后都会被主流开源软件所取代。完全没有必要。不重新发明轮子，不魔改，不是因为自己技术不能，而是因为，这个世界早已不是自己干所有事的年代了，这个时代是要想尽方法跟整个产业，整个技术社区融合和合作，这样才会有最大的收益。那些试图因为某个特例需要自成一套的玩法，短期没问题，但长期来说，我都不看好。</li>
<li><strong>绝大多数情况下，如无非常特殊要求，选 Java基本是不会错的</strong>。一方面，这是因为 Java 的业务开发的生产力是非常好的，而且有 Spring 框架保障，代码很难写烂，另外，Java 的社区太成熟了，你需要的各种架构和技术都可以很容易获得，技术红利实在是太大。这种运行在JVM上的语言有太多太多的好处了。在 Java 的技术栈上，你的架构风险和架构的成本（无论是人力成本，时间成本和资金成本）从长期来说都是最优的</li>
</ul>
<p>在我见过的公司中，好些公司的架构都被技术负责人个人的喜好、擅长和个人经验给绑架了，完全不是从一个客观的角度来进行技术选型。其实，从 0 到 1 的阶段，你用什么样的技术都行，如果你做一个简单的应用，没有事务处理没有复杂的交易流程，比如一些论坛、社交之类的应用，你用任何语言都行。但是如果有一天你的系统变复杂了，需要处理交易了，量也上来了，从 1 到 10，甚至从 10 到 100，你的开发团队也变大了，需要构建的系统越来越大，你可能会发现你只有一个选择，就是 Java。想想京东从.NET 到 Java，淘宝从 PHP 到 Java……</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>2 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-266/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">屏蔽国内IP访问网站</h2>

    <p class="date text-base-content/60">
    
      Saturday, Dec 25, 2021
    
    </p>

    <blockquote>
    <p>今天有个朋友给我说让我把网站弄一下，别让国内的人访问，主要是为了保证营销的数据准确性和防止同行抄袭。当然是没办法彻底屏蔽的，防小人不防君子吧。我用的是Nginx，</p>
  </blockquote>

<p>首先我们要去弄到国内的IP地址段，访问网站 <a href="http://www.ip2location.com/free/visitor-blocker" target="_blank">http://www.ip2location.com/free/visitor-blocker</a>
 ，点击左侧的“Firewall List by Country”选项卡。点击下载ip文件</p>
<p><img src="https://img.maruifu.com/images/2021/12/25/image-20211225233331215.png" alt="image-20211225233331215" title="image-20211225233331215"></p>



  <blockquote>
    <p>顺便要把你现在的IP最好不要加进去，否则你自己会访问不了。</p>
  </blockquote>

<p>下载不了的可以指定 使用</p>
<p><a href="https://img.maruifu.com/images/file/firewall.txt" target="_blank">国内IP地址列表</a>
</p>
<h2 id="方法一">方法一</h2>
<p>复制整段代码到你的Nginx配置文件里面即可。</p>
<h2 id="方法二">方法二</h2>
<ol>
<li>
<p>把文件去掉第一行的“location / {”和最后一行的“}”，重命名为<code>blockip.conf</code></p>
</li>
<li>
<p>在nginx配置的http块下面加上<code>include blockip.conf;</code></p>
</li>
<li>
<p>可以加载个自定义页面</p>
<p>在<code>/www/wwwroot/watch</code>目录下新建一个 <code>403.html</code>文件</p>
<pre tabindex="0"><code>error_page 403 /403.html;
location = /403.html{
 root  /www/wwwroot/watch;
 allow all;
}
</code></pre></li>
</ol>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-23/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default3_hu_599e07ea93afc07d.webp" type="image/webp" />
      <img src="/images/default3.jpg" alt="/images/default3.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">微信公众平台模拟登录</h2>

    <p class="date text-base-content/60">
    
      Friday, Dec 24, 2021
    
    </p>

    <h1 id="获取登录二维码">获取登录二维码</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl --request GET <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --url <span style="color:#e6db74">&#39;https://mp.weixin.qq.com/cgi-bin/scanloginqrcode?action=getqrcode&amp;random=1640370340&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;Cache-Control: no-cache&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;cookie: pgv_pvid=9632095410; ua_id=GsK0Fg1c1cbWnuJ5AAAAAAx-o-uFsXSgSZ3ywvjEups=; mm_lang=zh_CN; wxuin=14857539381975; ticket_uin=EXPIRED; ticket_certificate=EXPIRED; login_certificate=EXPIRED; fake_id=EXPIRED; login_sid_ticket=EXPIRED; master_sid=EXPIRED; master_user=EXPIRED; master_ticket=EXPIRED; sp_user=EXPIRED; sp_sid=EXPIRED; sp_slave_user=EXPIRED; safecode=EXPIRED; ticket=EXPIRED; ticket_id=EXPIRED; openid2ticket_o40kr6FMP04YPyEfeMrDSyUxY9tI=EXPIRED; infringementlogin_ticket=EXPIRED; infringementlogin_ticket_id=EXPIRED; qruin=EXPIRED; qrlogin_data_ticket=EXPIRED; xid=f004e79875fc4d0d9ff4ee20d8ac132b; slave_sid=EXPIRED; slave_user=EXPIRED; bizuin=EXPIRED; data_bizuin=EXPIRED; data_ticket=EXPIRED; rand_info=EXPIRED; slave_bizuin=EXPIRED; uuid=b5af9dd9aa01b80bf56c38341620515b&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --cookie <span style="color:#e6db74">&#39;pgv_pvid=9632095410; ua_id=GsK0Fg1c1cbWnuJ5AAAAAAx-o-uFsXSgSZ3ywvjEups=; mm_lang=zh_CN; wxuin=14857539381975; ticket_uin=EXPIRED; ticket_certificate=EXPIRED; login_certificate=EXPIRED; fake_id=EXPIRED; login_sid_ticket=EXPIRED; master_sid=EXPIRED; master_user=EXPIRED; master_ticket=EXPIRED; sp_user=EXPIRED; sp_sid=EXPIRED; sp_slave_user=EXPIRED; safecode=EXPIRED; ticket=EXPIRED; ticket_id=EXPIRED; openid2ticket_o40kr6FMP04YPyEfeMrDSyUxY9tI=EXPIRED; infringementlogin_ticket=EXPIRED; infringementlogin_ticket_id=EXPIRED; qruin=EXPIRED; qrlogin_data_ticket=EXPIRED; xid=f004e79875fc4d0d9ff4ee20d8ac132b; slave_sid=EXPIRED; slave_user=EXPIRED; bizuin=EXPIRED; data_bizuin=EXPIRED; data_ticket=EXPIRED; rand_info=EXPIRED; slave_bizuin=EXPIRED; uuid=b5af9dd9aa01b80bf56c38341620515b&#39;</span>
</span></span></code></pre></div><h1 id="二维码扫描结果检查">二维码扫描结果检查</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl --request GET <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --url <span style="color:#e6db74">&#39;https://mp.weixin.qq.com/cgi-bin/scanloginqrcode?action=ask&amp;token=&amp;lang=zh_CN&amp;f=json&amp;ajax=1&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;Cache-Control: no-cache&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;cookie: pgv_pvid=9632095410; ua_id=GsK0Fg1c1cbWnuJ5AAAAAAx-o-uFsXSgSZ3ywvjEups=; mm_lang=zh_CN; wxuin=14857539381975; ticket_uin=EXPIRED; ticket_certificate=EXPIRED; login_certificate=EXPIRED; fake_id=EXPIRED; login_sid_ticket=EXPIRED; master_sid=EXPIRED; master_user=EXPIRED; master_ticket=EXPIRED; sp_user=EXPIRED; sp_sid=EXPIRED; sp_slave_user=EXPIRED; safecode=EXPIRED; ticket=EXPIRED; ticket_id=EXPIRED; openid2ticket_o40kr6FMP04YPyEfeMrDSyUxY9tI=EXPIRED; infringementlogin_ticket=EXPIRED; infringementlogin_ticket_id=EXPIRED; qruin=EXPIRED; qrlogin_data_ticket=EXPIRED; xid=f004e79875fc4d0d9ff4ee20d8ac132b; slave_sid=EXPIRED; slave_user=EXPIRED; bizuin=EXPIRED; data_bizuin=EXPIRED; data_ticket=EXPIRED; rand_info=EXPIRED; slave_bizuin=EXPIRED; uuid=b5af9dd9aa01b80bf56c38341620515b&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --cookie <span style="color:#e6db74">&#39;pgv_pvid=9632095410; ua_id=GsK0Fg1c1cbWnuJ5AAAAAAx-o-uFsXSgSZ3ywvjEups=; mm_lang=zh_CN; wxuin=14857539381975; ticket_uin=EXPIRED; ticket_certificate=EXPIRED; login_certificate=EXPIRED; fake_id=EXPIRED; login_sid_ticket=EXPIRED; master_sid=EXPIRED; master_user=EXPIRED; master_ticket=EXPIRED; sp_user=EXPIRED; sp_sid=EXPIRED; sp_slave_user=EXPIRED; safecode=EXPIRED; ticket=EXPIRED; ticket_id=EXPIRED; openid2ticket_o40kr6FMP04YPyEfeMrDSyUxY9tI=EXPIRED; infringementlogin_ticket=EXPIRED; infringementlogin_ticket_id=EXPIRED; qruin=EXPIRED; qrlogin_data_ticket=EXPIRED; xid=f004e79875fc4d0d9ff4ee20d8ac132b; slave_sid=EXPIRED; slave_user=EXPIRED; bizuin=EXPIRED; data_bizuin=EXPIRED; data_ticket=EXPIRED; rand_info=EXPIRED; slave_bizuin=EXPIRED; uuid=b5af9dd9aa01b80bf56c38341620515b&#39;</span>
</span></span></code></pre></div><h1 id="真正获取登录的token">真正获取登录的token</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>curl --request POST <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --url <span style="color:#e6db74">&#39;https://mp.weixin.qq.com/cgi-bin/bizlogin?action=login&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;: authority: mp.weixin.qq.com&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;Cache-Control: no-cache&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;Content-Type: application/x-www-form-urlencoded&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;accept: */*&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;accept-encoding: gzip, deflate, br&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;accept-language: zh-CN,zh;q=0.9&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;content-length: 123&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;cookie: pgv_pvid=9632095410; ua_id=GsK0Fg1c1cbWnuJ5AAAAAAx-o-uFsXSgSZ3ywvjEups=; mm_lang=zh_CN; wxuin=14857539381975; ticket_uin=EXPIRED; ticket_certificate=EXPIRED; login_certificate=EXPIRED; fake_id=EXPIRED; login_sid_ticket=EXPIRED; master_sid=EXPIRED; master_user=EXPIRED; master_ticket=EXPIRED; sp_user=EXPIRED; sp_sid=EXPIRED; sp_slave_user=EXPIRED; safecode=EXPIRED; ticket=EXPIRED; ticket_id=EXPIRED; openid2ticket_o40kr6FMP04YPyEfeMrDSyUxY9tI=EXPIRED; infringementlogin_ticket=EXPIRED; infringementlogin_ticket_id=EXPIRED; qruin=EXPIRED; qrlogin_data_ticket=EXPIRED; xid=f004e79875fc4d0d9ff4ee20d8ac132b; slave_sid=EXPIRED; slave_user=EXPIRED; bizuin=EXPIRED; data_bizuin=EXPIRED; data_ticket=EXPIRED; rand_info=EXPIRED; slave_bizuin=EXPIRED; uuid=b5af9dd9aa01b80bf56c38341620515b&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;origin: https://mp.weixin.qq.com&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;referer: https://mp.weixin.qq.com/&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;sec-fetch-mode: cors&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;sec-fetch-site: same-origin&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;user-agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --header <span style="color:#e6db74">&#39;x-requested-with: XMLHttpRequest&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --cookie <span style="color:#e6db74">&#39;pgv_pvid=9632095410; ua_id=GsK0Fg1c1cbWnuJ5AAAAAAx-o-uFsXSgSZ3ywvjEups=; mm_lang=zh_CN; wxuin=14857539381975; ticket_uin=EXPIRED; ticket_certificate=EXPIRED; login_certificate=EXPIRED; fake_id=EXPIRED; login_sid_ticket=EXPIRED; master_sid=EXPIRED; master_user=EXPIRED; master_ticket=EXPIRED; sp_user=EXPIRED; sp_sid=EXPIRED; sp_slave_user=EXPIRED; safecode=EXPIRED; ticket=EXPIRED; ticket_id=EXPIRED; openid2ticket_o40kr6FMP04YPyEfeMrDSyUxY9tI=EXPIRED; infringementlogin_ticket=EXPIRED; infringementlogin_ticket_id=EXPIRED; qruin=EXPIRED; qrlogin_data_ticket=EXPIRED; xid=f004e79875fc4d0d9ff4ee20d8ac132b; slave_sid=EXPIRED; slave_user=EXPIRED; bizuin=EXPIRED; data_bizuin=EXPIRED; data_ticket=EXPIRED; rand_info=EXPIRED; slave_bizuin=EXPIRED; uuid=b5af9dd9aa01b80bf56c38341620515b&#39;</span> <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --data <span style="color:#e6db74">&#39;userlang=zh_CN&amp;redirect_url=&amp;cookie_forbidden=0&amp;cookie_cleaned=0&amp;plugin_used=0&amp;login_type=3&amp;token=&amp;lang=zh_CN&amp;f=json&amp;ajax=1&#39;</span>
</span></span></code></pre></div>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>2 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-22/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default3_hu_599e07ea93afc07d.webp" type="image/webp" />
      <img src="/images/default3.jpg" alt="/images/default3.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">成都房价 - 参考链家</h2>

    <p class="date text-base-content/60">
    
      Friday, Dec 24, 2021
    
    </p>

    <p><a href="https://cd.fang.lianjia.com/loupan/mapsearch/district?&amp;position_border=1" target="_blank">成都各区的边界</a>
 直接获得所有数据</p>
<p><a href="https://map.ke.com/proxyApi/i.c-pc-webapi.ke.com/map/houselist?cityId=510100&amp;dataSource=ESF&amp;curPage=1&amp;condition=&amp;type=&amp;resblockId=&amp;maxLatitude=31.081361684180063&amp;minLatitude=30.117506499733715&amp;maxLongitude=105.2391517446174&amp;minLongitude=103.03147612329559" target="_blank">成都二手房价格</a>
 分页查询，修改curPage</p>
<p><a href="https://cd.fang.lianjia.com/loupan/mapsearch/resblock" target="_blank">成都新房价格</a>
 直接获得所有数据</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-21/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default2_hu_c96b8a8cc3f55f81.webp" type="image/webp" />
      <img src="/images/default2.jpg" alt="/images/default2.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">成都市人口统计接口梳理情况</h2>

    <p class="date text-base-content/60">
    
      Friday, Dec 24, 2021
    
    </p>

    <pre tabindex="0"><code>data: {
	imgApi: n,
	countyCodeArr: [],
	countyIndex: 0,
	streetIndex: 0,
	streetArray: [&#34;男性22/女性20—30周岁&#34;, &#34;31—40周岁&#34;, &#34;41—50周岁&#34;, &#34;51—60周岁&#34;],
	ec: {
		lazyLoad: !0
	},
	countyName: &#34;区（市）县&#34;,
	isLoaded: !1,
	isDisposed: !1,
	showData: !1,
	optionData: {},
	addressArr: [],
	sexArr: [&#34;a&#34;, &#34;b&#34;, &#34;c&#34;, &#34;d&#34;] //依次对应&#34;21—30周岁&#34;, &#34;31—40周岁&#34;, &#34;41—50周岁&#34;, &#34;51—60周岁&#34;
}
</code></pre><h1 id="getbirthinfo-女性生育">getBirthInfo 女性生育</h1>
<p><a href="https://cdrpcx.cdpczx.cn:6733/rp/rpdatacodeConcroller/getBirthInfo.json?type=a" target="_blank">https://cdrpcx.cdpczx.cn:6733/rp/rpdatacodeConcroller/getBirthInfo.json?type=a</a>
</p>
<pre tabindex="0"><code>type：
[&#34;a&#34;, &#34;b&#34;, &#34;c&#34;, &#34;d&#34;] //依次对应&#34;21—30周岁&#34;, &#34;31—40周岁&#34;, &#34;41—50周岁&#34;, &#34;51—60周岁&#34;
[{
	filedName: &#34;UNBIRTH&#34;,
	name: &#34;未生育&#34;
}, {
	filedName: &#34;ONECHILD&#34;,
	name: &#34;一孩&#34;
}, {
	filedName: &#34;TWOCHILD&#34;,
	name: &#34;两孩&#34;
}, {
	filedName: &#34;THREECHILD&#34;,
	name: &#34;三孩及以上&#34;
}]
</code></pre><h1 id="getaddr-获取全市区域代码">getAddr 获取全市区域代码</h1>
<p><a href="https://cdrpcx.cdpczx.cn:6733/rp/rpdatacodeConcroller/getDatacode.json?type=1" target="_blank">https://cdrpcx.cdpczx.cn:6733/rp/rpdatacodeConcroller/getDatacode.json?type=1</a>
</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>2 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-267/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default3_hu_599e07ea93afc07d.webp" type="image/webp" />
      <img src="/images/default3.jpg" alt="/images/default3.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">一份超详细的MySQL高性能优化实战总结！</h2>

    <p class="date text-base-content/60">
    
      Sunday, Dec 19, 2021
    
    </p>

    <p>MySQL 对于很多 Linux 从业者而言，是一个非常棘手的问题，多数情况都是因为对数据库出现问题的情况和处理思路不清晰。</p>
<p>在进行 MySQL 的优化之前必须要了解的就是 MySQL 的查询过程，很多的查询优化工作实际上就是遵循一些原则让 MySQL 的优化器能够按照预想的合理方式运行而已。</p>
<p><img src="https://img.maruifu.com/images/2021/12/19/f9c4a2b74a824b02afdd4d26da937501.jpg" alt="一份超详细的MySQL高性能优化实战总结！" title="一份超详细的MySQL高性能优化实战总结！"></p>
<h1 id="优化的哲学">优化的哲学</h1>
<p>注：优化有风险，修改需谨慎。</p>
<ul>
<li>优化可能带来的问题：</li>
<li>优化不总是对一个单纯的环境进行，还很可能是一个复杂的已投产的系统。</li>
<li>优化手段本来就有很大的风险，只不过你没能力意识到和预见到。</li>
<li>任何的技术可以解决一个问题，但必然存在带来一个问题的风险。</li>
<li>对于优化来说解决问题而带来的问题，控制在可接受的范围内才是有成果。</li>
<li>保持现状或出现更差的情况都是失败。</li>
</ul>
<h1 id="优化的需求">优化的需求</h1>
<ul>
<li>稳定性和业务可持续性，通常比性能更重要。</li>
<li>优化不可避免涉及到变更，变更就有风险。</li>
<li>优化使性能变好，维持和变差是等概率事件。</li>
<li>切记优化，应该是各部门协同，共同参与的工作，任何单一部门都不能对数据库进行优化。</li>
</ul>
<p>所以优化工作，是由业务需求驱使的!</p>
<p>优化由谁参与?在进行数据库优化时，应由数据库管理员、业务部门代表、应用程序架构师、应用程序设计人员、应用程序开发人员、硬件及系统管理员、存储管理员等，业务相关人员共同参与。</p>
<h1 id="优化思路">优化思路</h1>
<h2 id="优化什么">优化什么</h2>
<p>在数据库优化上有两个主要方面：</p>
<ul>
<li>安全：数据可持续性。</li>
<li>性能：数据的高性能访问。</li>
</ul>
<h2 id="优化范围">优化范围</h2>
<p>存储、主机和操作系统方面：</p>
<ul>
<li><strong>主机架构稳定性</strong></li>
<li><strong>I/O 规划及配置</strong></li>
<li><strong>Swap 交换分区</strong></li>
<li><strong>OS 内核参数和网络问题</strong></li>
</ul>
<p>应用程序方面：</p>
<ul>
<li><strong>应用程序稳定性</strong></li>
<li><strong>SQL 语句性能</strong></li>
<li><strong>串行访问资源</strong></li>
<li><strong>性能欠佳会话管理</strong></li>
<li><strong>这个应用适不适合用 MySQL</strong></li>
</ul>
<p>数据库优化方面：</p>
<ul>
<li><strong>内存</strong></li>
<li><strong>数据库结构(物理&amp;逻辑)</strong></li>
<li><strong>实例配置</strong></li>
</ul>
<p>说明：不管是设计系统、定位问题还是优化，都可以按照这个顺序执行。</p>
<h2 id="优化维度">优化维度</h2>
<p><img src="https://img.maruifu.com/images/2021/12/19/3cf4c8205d054deba5d2baee060ad793.jpg" alt="一份超详细的MySQL高性能优化实战总结！" title="一份超详细的MySQL高性能优化实战总结！"></p>
<p>数据库优化维度有如下四个：</p>
<ul>
<li><strong>硬件</strong></li>
<li><strong>系统配置</strong></li>
<li><strong>数据库表结构</strong></li>
<li><strong>SQL 及索引</strong></li>
</ul>
<h2 id="优化选择">优化选择</h2>
<ul>
<li>优化成本：硬件&gt;系统配置&gt;数据库表结构&gt;SQL 及索引。</li>
<li>优化效果：硬件&lt;系统配置&lt;数据库表结构</li>
</ul>
<h1 id="优化工具">优化工具</h1>
<p>检查问题常用的 12 个工具：</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>4 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-268/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">一个简单案例，带你看懂GC日志！</h2>

    <p class="date text-base-content/60">
    
      Sunday, Dec 19, 2021
    
    </p>

    <h2 id="代码">代码</h2>
<pre tabindex="0"><code>public class Main {
 
  public static void main(String[] args) {
    byte[] array1 = new byte[4 * 1024 * 1024];
    array1 = null;
 
    byte[] array2 = new byte[2 * 1024 * 1024];
    byte[] array3 = new byte[2 * 1024 * 1024];
    byte[] array4 = new byte[2 * 1024 * 1024];
    byte[] array5 = new byte[128 * 1024];
    byte[] array6 = new byte[2 * 1024 * 1024];
  }
}
</code></pre><h2 id="参数">参数</h2>
<h3 id="参数设置运行">参数设置运行</h3>
<pre tabindex="0"><code>-XX:NewSize=10M -XX:MaxNewSize=10M -XX:InitialHeapSize=20M -XX:MaxHeapSize=20M -XX:SurvivorRatio=8 -XX:MaxTenuringThreshold=15 -XX:PretenureSizeThreshold=3M -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:gc.log
</code></pre><h3 id="参数介绍">参数介绍</h3>
<pre tabindex="0"><code>-XX:NewSize:初始年轻代大小
-XX:MaxNewSize:最大年轻代大小
-XX:InitialHeapSize:定义堆的初始化大小，默认值是物理内存的1/64，其实就是:-Xms
-XX:MaxHeapSize:定义最大堆的大小，默认为物理内存的1/4，其实就是:-Xmx
-XX:SurvivorRatio:Eden区与Survivor区的大小比值
-XX:MaxTenuringThreshold:年轻代对象转换为老年代对象最大年龄值
-XX:PretenureSizeThreshold=3M:对象大小超过3M时直接在老年代分配内存
-XX:+UseParNewGC:使用ParNew收集器
-XX:+UseConcMarkSweepGC:使用CMS收集器
-XX:+PrintGCDetails:GC时打印详细信息
-Xloggc:输出GC日志信息到文件中
</code></pre><h2 id="日志">日志</h2>
<h3 id="日志情况">日志情况</h3>
<pre tabindex="0"><code>0.095: [GC (Allocation Failure) 0.095: [ParNew (promotion failed): 7838K-&gt;8391K(9216K), 0.0029438 secs]0.098: [CMS: 8194K-&gt;6659K(10240K), 0.0024311 secs] 11934K-&gt;6659K(19456K), [Metaspace: 3121K-&gt;3121K(1056768K)], 0.0055393 secs] [Times: user=0.02 sys=0.00, real=0.00 secs] 
Heap
 par new generation   total 9216K, used 2214K [0x00000007bec00000, 0x00000007bf600000, 0x00000007bf600000)
  eden space 8192K,  27% used [0x00000007bec00000, 0x00000007bee29820, 0x00000007bf400000)
  from space 1024K,   0% used [0x00000007bf500000, 0x00000007bf500000, 0x00000007bf600000)
  to   space 1024K,   0% used [0x00000007bf400000, 0x00000007bf400000, 0x00000007bf500000)
 concurrent mark-sweep generation total 10240K, used 6659K [0x00000007bf600000, 0x00000007c0000000, 0x00000007c0000000)
 Metaspace       used 3142K, capacity 4496K, committed 4864K, reserved 1056768K
  class space    used 347K, capacity 388K, committed 512K, reserved 1048576K
</code></pre><h3 id="日志详解">日志详解</h3>
<pre tabindex="0"><code>GC：表明进行了一次垃圾回收，前面没有Full修饰，表明这是一次Young GC

Allocation Failure：表明本次引起GC的原因是因为在年轻代中没有足够的空间能够存储新的数据了

ParNew：表明本次GC发生在年轻代并且使用的是ParNew垃圾收集器。ParNew是一个Serial收集器的多线程版本，会使用多个CPU和线程完成垃圾收集工作（默认使用的线程数和CPU数相同，可以使用-XX：ParallelGCThreads参数限制）

ParNew (promotion failed): 7838K-&gt;8391K(9216K) 7838K-&gt;8391K(9216K)：单位是KB，三个参数分别为：GC前该内存区域(这里是年轻代)使用容量，GC后该内存区域使用容量，该内存区域总容量。

0.0029438 secs：该内存区域GC耗时，单位是秒

CMS: 8194K-&gt;6659K(10240K), 0.0024311 secs] 11934K-&gt;6659K(19456K)  8194K-&gt;6659K(10240K)：GC前该内存区域(这里是老年代)使用容量变化，10240K表示该内存区域总容量， 11934K-&gt;6659K(19456K)：三个参数分别为：堆区垃圾回收前的大小，堆区垃圾回收后的大小，堆区总大小

Times: user=0.02 sys=0.00, real=0.00 secs：分别表示用户态耗时，内核态耗时和总耗时
</code></pre><h2 id="详细介绍">详细介绍</h2>
<p>可以看到出现了promotion failed，那什么情况下会出现promotion failed？</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>2 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-269/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">MAC 下 IDEA 启动SVN Eclipse项目</h2>

    <p class="date text-base-content/60">
    
      Saturday, Dec 18, 2021
    
    </p>

    <h2 id="下载svn">下载SVN</h2>
<pre tabindex="0"><code>//安装brew  已经安装可以忽略
/bin/zsh -c &#34;$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)&#34;
// 安装svn
brew install svn
</code></pre><p>如果出现一下错误 ：</p>
<pre tabindex="0"><code>svn: E170013: Commit failed (details follow): svn: E170013: Unable to connect 
to a repository at URL &#39;&#39; svn: E230001: Server SSL certificate verification failed: 
certificate issued for a different hostname
</code></pre><p>解决办法：</p>
<pre tabindex="0"><code>Configure-&gt;Preferences-&gt;Version Control-&gt;Subversion-&gt;Enable interactive mode 勾选上
</code></pre><h2 id="配置jdk">配置JDK</h2>
<pre tabindex="0"><code>File-&gt;Project Structure-&gt;Project-&gt;Project SDK-&gt;New-&gt;JDK 选择自己的JDK版本
File-&gt;Project Structure-&gt;Project-&gt;Project language level-&gt;JDK 选择自己的JDK版本
File-&gt;Project Structure-&gt;Module SDK-&gt;选择自己的JDK版本
</code></pre><h2 id="配置tomcat">配置Tomcat</h2>
<pre tabindex="0"><code>// 进入Tomcat 配置
Add Configuration -&gt; Add New Configuration-&gt;Tomcat Server-&gt;Local
//选择Tomcat
Server-&gt;Application server-&gt; 选择自己的Tomcat
//选择JDK
Server-&gt;JRE-&gt; 选择自己的JDK版本
//添加编译目录
Deployment-&gt;External Source-&gt;选择项目的WebRoot目录

//其他问题 检查 文件对应属性是否正确
项目右键-&gt;Mark Directory As
</code></pre>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
        <div class="w-full md:w-1/2 lg:w-1/3 p-4 dream-column">
          <a class="card bg-base-100 hover:bg-base-content/10 shadow-xl cursor-pointer dark:border dark:border-base-content/30" href="/posts/post-270/">
  
  <figure>
    
    
    <picture>
      <source srcset="/images/default4_hu_ae815e0f1649c253.webp" type="image/webp" />
      <img src="/images/default4.jpg" alt="/images/default4.jpg" />
    </picture>
    
  </figure>
  

  <div class="card-body">
    <h2 class="card-title">Could not resolve XML resource [null] with public ID [null]</h2>

    <p class="date text-base-content/60">
    
      Saturday, Dec 18, 2021
    
    </p>

    <h2 id="现象">现象</h2>
<p>项目启动运行时发现报以下错误</p>
<pre tabindex="0"><code>严重: Parse error in application web.xml file at jndi:/localhost/WEB-INF/web.xml
java.io.FileNotFoundException: Could not resolve XML resource [null] with public ID [null], system ID [webxml/web_dataclient.xml] and base URI [jndi:/localhost/WEB-INF/web.xml] to a known, local entity.
	at org.apache.tomcat.util.descriptor.LocalResolver.resolveEntity(LocalResolver.java:154)
	at com.sun.org.apache.xerces.internal.util.EntityResolver2Wrapper.resolveEntity(EntityResolver2Wrapper.java:176)
	at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.resolveEntityAsPerStax(XMLEntityManager.java:991)
	at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1206)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEntityReference(XMLDocumentFragmentScannerImpl.java:1908)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3067)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:606)
	at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:848)
	at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:777)
</code></pre><h2 id="原因">原因</h2>
<p>servlet很多，方便管理希望能拆分文件 在web.xml文件里webapp标签上方加上</p>
<pre tabindex="0"><code>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;!DOCTYPE web-app
        [&lt;!ENTITY dataclient SYSTEM  &#34;webxml/web_dataclient.xml&#34;&gt;
         &lt;!ENTITY document   SYSTEM  &#34;webxml/web_document.xml&#34;&gt;
         &lt;!ENTITY project SYSTEM  &#34;webxml/web_project.xml&#34;&gt;
        ]&gt;  
</code></pre><p>我测试了一下在tomcat 6下面这个方式确实是可以的，但是在tomcat7下面就报错了。</p>

    
    <div class="card-actions justify-between items-center mt-4">
      
        <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    
      <span itemprop="name">cuitpanfei</span>
    
  
  </span>
</div>

      

      <div class="flex items-center">
        <ion-icon name="time" class="mr-1"></ion-icon>
        <span>1 minute read</span>
      </div>
    </div>
  </div>
</a>

        </div>
      
    </div>
    

    
    <div class="flex justify-center pt-8">
      <div class="join grid grid-cols-2">
  
  <a href="/categories/page/5/" title=Previous&#32;page class="join-item btn btn-outline btn-sm">
    Previous page
  </a>
  
  
  <a href="/categories/page/7/" title="Next page" class="join-item btn btn-outline btn-sm">
    Next page
  </a>
  
</div>

    </div>
    
  </div>
</div>



            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 Cuitpanfei Site</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>© 2025 Cuitpanfei Site</p>
  

  
  <p class="text-sm">
    🌱
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme =  null 
  window.darkTheme =  null 
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script>

  
  
  <script src="/js/grid.js"></script>




<script src="/js/main.js"></script>

    





    

    

    

    

    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js" integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin="anonymous"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js" integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin="anonymous"></script>
  </body>
</html>
